@* view for a list of galleries *@
@using System.Globalization
@model IReadOnlyList<PhotoGallery.Web.Controllers.PublicGalleryListItemVM>

@{
    ViewData["Title"] = "Galleries";
    var q = (ViewBag.Query as string) ?? "";
}

<!--search form -->
<form method="get" class="mb-3">
  <div class="input-group">
    <input type="text"
           class="form-control"
           name="q"
           value="@q"
           placeholder="Search galleries by title, description, or owner..." />
    <button class="btn btn-primary" type="submit">Search</button>
    @if (!string.IsNullOrWhiteSpace(q))
    {
        <a class="btn btn-outline-secondary" asp-controller="Galleries" asp-action="Index">Clear</a>
    }
  </div>
</form>

<h2 class="mb-3">Galleries <small class="text-muted">(@Model.Count)</small></h2> 

@if (!string.IsNullOrWhiteSpace(q))
{
    <p class="text-muted">Showing results for “<strong>@q</strong>”.</p>
}

@if (Model.Count == 0)
{
    <div class="alert alert-info">No galleries yet.</div>
}
else
{
    <div class="list-group">
        @foreach (var g in Model)
        {
            <a class="list-group-item list-group-item-action" asp-controller="Galleries" asp-action="Show" asp-route-id="@g.Id">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1">@g.Title</h5>
                    <small class="text-muted">
                        @g.CreatedUtc.ToString("dd MMMM yyyy", CultureInfo.InvariantCulture)
                    </small>
                </div>
                @if (!string.IsNullOrWhiteSpace(g.Description))
                {
                    <p class="mb-1 text-muted">@g.Description</p>
                }
                <small class="text-muted">
                    by <strong>@g.OwnerName</strong> • @g.PhotoCount photo@(g.PhotoCount == 1 ? "" : "s")
                </small>
            </a>
        }
    </div>
}